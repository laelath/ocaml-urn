<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>U (urn.Urn.U)</title><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.3.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">urn</a> &#x00BB; <a href="../index.html">Urn</a> &#x00BB; U</nav><header class="odoc-preamble"><h1>Module type <code><span>Urn.U</span></code></h1><p>Output signature of the functor <a href="../Make/index.html"><code>Make</code></a>.</p></header><nav class="odoc-toc"><ul><li><a href="#creation">Creating Urns</a></li><li><a href="#adding">Adding Elements to Urns</a></li><li><a href="#sampling">Sampling Urns</a></li><li><a href="#misc">Misc</a></li></ul></nav><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-weight"><a href="#type-weight" class="anchor"></a><code><span><span class="keyword">type</span> weight</span></code></div><div class="spec-doc"><p>The type of weights.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> <span>!+'a t</span></span></code></div><div class="spec-doc"><p>The type of urns.</p></div></div><h2 id="creation"><a href="#creation" class="anchor"></a>Creating Urns</h2><p>Note: a weight value <code>w</code> is non-positive iff <code>Weight.compare w Weight.zero &lt;= 0</code>.</p><div class="odoc-spec"><div class="spec value anchored" id="val-singleton"><a href="#val-singleton" class="anchor"></a><code><span><span class="keyword">val</span> singleton : <span><a href="#type-weight">weight</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>singleton w x</code> returns the one-element urn containing <code>x</code> with weight <code>w</code>. Time complexity O(1).</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <code>Invalid_argument</code> <p>if <code>w</code> is non-positive.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-of_list"><a href="#val-of_list" class="anchor"></a><code><span><span class="keyword">val</span> of_list : <span><span><span>(<a href="#type-weight">weight</a> * <span class="type-var">'a</span>)</span> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> option</span></span></code></div><div class="spec-doc"><p><code>of_list was</code> creates an urn from a list of pairs of weights and values. Time complexity O(n).</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <code>Invalid_argument</code> <p>if any of the weights are non-positive.</p></li></ul></div></div><h2 id="adding"><a href="#adding" class="anchor"></a>Adding Elements to Urns</h2><div class="odoc-spec"><div class="spec value anchored" id="val-add"><a href="#val-add" class="anchor"></a><code><span><span class="keyword">val</span> add : <span><a href="#type-weight">weight</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>add w a ur</code> returns an urn containing the same weights and elements as <code>ur</code> but additionally containing <code>a</code> with weight <code>w</code>. Time complexity O(log n).</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <code>Invalid_argument</code> <p>if <code>w</code> is non-positive.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-add_seq"><a href="#val-add_seq" class="anchor"></a><code><span><span class="keyword">val</span> add_seq : <span><span><span>(<a href="#type-weight">weight</a> * <span class="type-var">'a</span>)</span> <span class="xref-unresolved">Stdlib</span>.Seq.t</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>Add the weight-value pairs in the sequence to the urn. Time complexity O(m log n), where m is the length of the sequence.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <code>Invalid_argument</code> <p>if any of the weights are non-positive.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-add_list"><a href="#val-add_list" class="anchor"></a><code><span><span class="keyword">val</span> add_list : <span><span><span>(<a href="#type-weight">weight</a> * <span class="type-var">'a</span>)</span> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>Add the weight-value pairs in the list to the urn. Time complexity O(m log n), where m is the length of the list.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <code>Invalid_argument</code> <p>if any of the weights are non-positive.</p></li></ul></div></div><h2 id="sampling"><a href="#sampling" class="anchor"></a>Sampling Urns</h2><div class="odoc-spec"><div class="spec value anchored" id="val-sample"><a href="#val-sample" class="anchor"></a><code><span><span class="keyword">val</span> sample : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p><code>sample ur</code> samples an element of the urn <code>ur</code> and returns it. Time complexity O(log n).</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-remove"><a href="#val-remove" class="anchor"></a><code><span><span class="keyword">val</span> remove : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span>(<a href="#type-weight">weight</a> * <span class="type-var">'a</span>)</span> * <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> option</span></span></code></div><div class="spec-doc"><p><code>remove ur</code> samples an element of the urn <code>ur</code> and returns it along with a new urn with that element removed, or <code>None</code> if the new urn would be empty. Time complexity O(log n).</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-replace"><a href="#val-replace" class="anchor"></a><code><span><span class="keyword">val</span> replace : <span><a href="#type-weight">weight</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span>(<a href="#type-weight">weight</a> * <span class="type-var">'a</span>)</span> * <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>replace w a ur</code> samples the urn <code>ur</code>, and returns the sampled element and its weight along with a new urn with the sampled elements removed and <code>a</code> with weight <code>w</code> added. Time complexity O(log n).</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <code>Invalid_argument</code> <p>if <code>w</code> is non-positive.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-update"><a href="#val-update" class="anchor"></a><code><span><span class="keyword">val</span> update : 
  <span><span>(<span><a href="#type-weight">weight</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-weight">weight</a> * <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>(<a href="#type-weight">weight</a> * <span class="type-var">'a</span>)</span> * <span>(<a href="#type-weight">weight</a> * <span class="type-var">'a</span>)</span> * <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>update f ur</code> samples an element of the urn <code>ur</code>, then takes the chosen element <code>a</code> and its weight <code>w</code>, and replaces it with <code>a'</code> with weight <code>w'</code>, where <code>(w', a') = f w a</code>, returning a triple of <code>(w, a), (w', a'), ur'</code> where <code>ur'</code> is the urn containing all the elements and weights of <code>ur</code> but with the chosen <code>w, a</code> replaced by <code>w', a'</code>. Time complexity O(log n).</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <code>Invalid_argument</code> <p>if <code>w'</code> is non-positive.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-update_opt"><a href="#val-update_opt" class="anchor"></a><code><span><span class="keyword">val</span> update_opt : 
  <span><span>(<span><a href="#type-weight">weight</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<a href="#type-weight">weight</a> * <span class="type-var">'a</span>)</span> option</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>(<a href="#type-weight">weight</a> * <span class="type-var">'a</span>)</span> * <span><span>(<a href="#type-weight">weight</a> * <span class="type-var">'a</span>)</span> option</span> * <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> option</span></span></code></div><div class="spec-doc"><p><code>update f ur</code> samples an element of the urn <code>ur</code>, then takes the chosen element <code>a</code> and its weight <code>w</code>, and applies <code>f</code> to them. If <code>f w a</code> returns <code>None</code> then the element is removed from the urn. If <code>f w a</code> returns <code>Some (w', a')</code> then the chosen elements weight and value is replaced by <code>w'</code> and <code>a'</code> respectively. The elements of the returned triple are as in <code>update</code>. Time complexity O(log n).</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <code>Invalid_argument</code> <p>if <code>w'</code> is non-positive.</p></li></ul></div></div><h2 id="misc"><a href="#misc" class="anchor"></a>Misc</h2><div class="odoc-spec"><div class="spec value anchored" id="val-size"><a href="#val-size" class="anchor"></a><code><span><span class="keyword">val</span> size : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>size ur</code> returns the total number of elements in the urn <code>ur</code>. Time complexity O(1).</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-weight"><a href="#val-weight" class="anchor"></a><code><span><span class="keyword">val</span> weight : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-weight">weight</a></span></code></div><div class="spec-doc"><p><code>weight ur</code> returns the sum of all the weights in the urn <code>ur</code>. Time complexity O(1).</p></div></div></div></body></html>
